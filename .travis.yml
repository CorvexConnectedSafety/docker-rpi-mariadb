sudo: required
services:
- docker
language: bash
script:
- docker run --rm --privileged multiarch/qemu-user-static:register --reset
- docker build -t toniher/rpi-mariadb .
- docker run toniher/rpi-mariadb mysql --version
after_success:
- if [ "$TRAVIS_BRANCH" == "master" ]; then
- docker login -u="$DOCKER_HUB_USERNAME" -p="$DOCKER_HUB_PASSWORD"
- TAG=$(grep "ENV MYSQL_VERSION" Dockerfile | awk 'NF>1{print $NF}')
- docker tag toniher/rpi-mariadb toniher/rpi-mariadb:$TAG
- docker push toniher/rpi-mariadb:$TAG
- docker push toniher/rpi-mariadb
- fi
env:
  global:
  - secure: uZBFoHTtvNJTHejz4fCeY3nB50Tahb4XpD99CQ5eC0YWc9Bt4gsNr1bgfTb8DR9ttQ2vO6Z42+k+aUl02wAvIJSYy11MlHnKUhA4aO3D/WF7ceJuNXM2YmFrq8swBDmPl5GImbUBqxSEzriQVMkwHgR5RuXDCm3i3O01ZCaw2xAmN6d3XY0RyB09cZ6f3Ipple+T+hfCjQvbteKq3nAFdrRbga/mLtZmbTdcItqPB0EJ7L5e8k69phFFpgWqh7PffTkhbfipnW7Aia5UuiwJqIAIFUhE341YBhzRTI1hVaBSZj5HZjGaD8CPYvAiZI3+dXXO+Zc2QnSlX3uPr7PM5rnK62qZy2kz64ItKsd8Ov7PXeyECXLXAFM+Lpg7sNeqXIIILB9G0yio+qqImZXpGwI+doSvrDpkI4y1qrX+gnxW/L5h8a2uzeu/wUVnEmTE/3PigpBwS3zaKYdmuca7tIlJB0WoxXpOQ2qOtSsnTmWsKKvZl+nxRtPvZOyiCyeNuTFb/G/NBt9dw6y7HUpOncNcw4U76cjkaN8fxViGX05/G1AL9JmOwKwF4gkXdsl6fUBa06+xNhoqjIgTyFjrU/e4/YvT09bnlRG23S+oZ1Epb5bX/KwrbdlD0j+mEepSHeTmQZs7QU+KrxSxTXuTjvjP4qH+7b9Gr+bzUtGUfXI=
  - secure: Hq+CFtljksgUqvJnmVQh02hyYVZqP0hdm0IDz3mG8ejQyF4ohG28LGsQAdGLKIzb1g5elV3rANph6s7CJrNzfFAvz6F9mrsxemvGHBhOBkOoAeanAZ3w3TTihHfEG643iIfb5sl4nJ1Uprh88n0v3kO/O/eab99AcAVnGDLCt07SJ9comt5JMdIhnSWykv4xQEUdKYEPGf+eNBnvuk/h/1aNl+qxIdiLTqLjuc6zafP4RPds0leD2nVbGX5VdwohLYIk/jgQmM5QV1IR8i0GlsbF+lkE2AXVmfET7CHcobwybu2eu34bIrht6mWUVrMsuannbRx39SxJ2b5a59Z11YVgcUu4MZhiy4WzbDGbCwNuVx2/q0Bn86csc7O+pGTbuwuTCDlgFAoHGSr9axIkUcJbDjh+ZhXhL9rLf6DUSOuMDZWHhGIGEp4fHb3620ywj+WWK2dpZHyQxlZOqI9YhC8lO2RFB8sXdm7Mabb6/NjUFeiT6voRs9X2TCYvwLWaAfjtsy/eZ9hONgcdtRgM+aTg8C2bMq6jkTpKs7asHg/nFW9ZaX54BFwkA6LZVyLz3NT50P+ut97U3p7fySydV1D65PojYrBpO6TnjiS3YzMUATftWQzDliU3jqNKZS5fyw/UwrcFo1hc6ddD+YAANXQZkNBjSRhhnvQMzA7Blm4=
  - secure: o7sS7uiFu69+tbqL47CGZdfejkyGkU7QS30GrpSeSzxKx87sXzGlkkILc8J6GeaqWeQHJOLSX9oG3TQ7jYvU5bjIDBT81ZLg2FO37CQlyiC9yB4gX1QiTSa9A1ENhWE+m6UgzSKJ4X5HqZj9Vlwr5w+nONqXQRcxnnHCrGNbll8eGY8qV95IvYVKFp07Xha0yxcyp8Y2NOd8ixbaNKeBqj5cFeidhGCUJqTpcxUJGqDPpeflj4e+Q+CfG84qKqX9au8tI+N/DBFtlu32JXhc6A6NGWmGq8cljVfApaA86vqatGXnHl8zih/3/v6fnlYsfERBNVx7axIWkM5cuBX1y76wMIMie9TlhN3rE/+1DecPjVee9ud6bbtTIiaEWUKB2vvGJuOH0/695LXVlUNsINcUhGiingvvf77Oz/Q0WxtM378CwiCSE9BnsjfwRHWorGmEygqCC//E95uGyBi20WHSemVcSNjOoruW7T44C78Q5AP8SOIXmPyFFAhKGPjupNUwt5Erz/ev70RbSxENBD3tqjnx09nO09RjO8zRZ8nGZIgRY4O601Rt06/Id+dMAjr4UOUq0W3JpcnBwfFP3hXfD+xBaxC6tscMK5TL96Y4fOexw7sL3jUFzg3HP7K5vwf8IpDU+R+8bKTqPtN5Dwcd9tuyBbkRLOWy/xDo4N4=
  - secure: HxuWVqGnEmdElKVnle9GPcsWqbWibfJqDevu90tBwWC1P8tXs/R/ZjB+sazTnnJCXjzOhrEjfcuge+HXaIMQbAGa/JCyswqeUdTGzk6pifKD9nsOmx8g9oAKU9w6nz++sWthXhFf1ecWotxoEcPY9CuODBEMTGhxkhC+gJzy4JMOgBj5+wp17o54URgBDBg7UlWQ1CZP+JkQ20KDal6Tod+U1RUgc7R5wDFMLFFthlZs9tC8DIiapZMXeWsVjClpnuPNp4RThHsgiPRw3jdA1v4Z8PzUMk+EiJskm0SNIZkK1IVLDlTpRVbXeeCKBvxZ/sqd2YlWdr6WT0qLKIjzhIZobtQ+lp2dX/yokAKFPJrNvtCUj11DyVwdLeRgvoLivXwVd+Rb80SF7/VIqEpupY1ELjqlAZYu7nrL/QZIPyywU7SQ+65gIVfsUf6xOYpz7DTbeDWgoSCIgK8bukHvI5Ws00g765eNbrP+aMk7cnqBYE/K3chDrUijrEqKd+LAu5AM9t7+s/clImddbu9j0hYr7W0tVxv5f6GJMlFuXjQaSVxoKvmEGbV3OSiT3d6EPC8gF0MAyEYC6BTlU0v+L4dC4woWltfZ58cfMiOyKpYcd3B3s3FzcaBlZMAZq6mxGHFejU2cWTuIQliVB0HyT/CDjpQXa1Butpc2GLC0GkE=
  - secure: WBFyJl3tbIobF/mYXshr6R8FgVkmRtnH8rShnBD+8w0/iheST5QNj8NhTmp5WS9LL+wZgId4DGqkYdF2O17oi21uI1Nr9YVcfjdlerXbKqkyPUd7kdt1nj6Ay3b0U/9+iF1vBSELAN5l5gMebv5gRQnlt4HrkJTvfR4Ba9vHTzti8UuYrKWKPohbXCRC63f+frypKbEdkDSipzSHCHrTcaZn5wCrmprnsrWgfJpZ5uuuEXoOcsFt6pIJfmOm9ivL6cfgdaIal0cet2YKus8e4rMHCqCBh5bFv7H+KnGguMYhh7H4u0R2weV36/TNIrmxi4cgr52VLjVDSnkbo4J/wTnF0r1dbVKpnugJCJ07l+pG5sUh13X7Uz7C3MDo/WGlUtHpjlgO8OSlpckWKGYAoNFTm0y01bUc5BOcnJRc4rTU1RMR0B4RpkYQRzFqaWvdkAQD9esRZvJ9lBrpMl8whuSsyJFBCrRckqDz2RQ3qGnwkxQyRRjXcNcD6bnNFnuTcz5+tjGg+1kxXu5ue8RpseVmB2SlSpjzN13Q1y3Z9gutcnv9UO6u+OBO3ok5Bgq3zvCgPKwhHV9hss2Ay9dUWMxa8mrKj/iHZzFPy7JNIc9uaJSLtNFeQoE0ZmWrCRygN1dp/4MBf/B+RER0rXGDyK8uap/L4Rz6CZ8ojJGvz4k=
